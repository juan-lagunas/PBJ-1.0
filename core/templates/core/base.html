{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %}</title>

    {% tailwind_css %}
</head>
<body class="p-0 m-0 font-sans">
    {% if user.is_authenticated %}
    <!--Home if logged in-->
    <div class="min-h-screen bg-zinc-100 text-zinc-900 dark:bg-zinc-900 dark:text-zinc-100 transition ease-in-out delay-150">
            
        <header class="relative w-10/12 h-20 mx-auto z-10">

            <!--Mobile-->
            <div class="w-full h-full xl:invisible xl:hidden">
                <div class="flex flex-row justify-between h-full">
                    <a href="{% url 'core:index' %}" class="my-auto text-2xl font-semibold">PBJ.</a>
                    <form action="" class="m-auto flex w-1/2">
                        <input type="text" placeholder="Search part" autocomplete="off" class="w-full pl-5 py-3 rounded-lg shadow-sm outline-none bg-zinc-300 dark:bg-zinc-700 placeholder:text-zinc-500 border-transparent focus:border-transparent focus:ring-0 focus:text-white focus:bg-zinc-600 focus:placeholder:text-white dark:focus:placeholder:text-zinc-900 dark:focus:bg-zinc-200 dark:focus:text-zinc-900 focus:rounded-full">
                        <button class="-ml-8">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                            </svg>
                        </button>
                    </form>
                    <a href="{% url 'core:signout' %}" class="my-auto py-3 px-4 text-semibold bg-zinc-900 text-zinc-100 dark:bg-zinc-100 dark:text-zinc-900 rounded ">Sign Out</a>
                </div>
            </div>

            <!--Other Devices-->
            <div class="w-full h-full hidden xl:visible xl:flex">

                <div class="m-auto flex w-1/12">
                    <a href="{% url 'core:index' %}" class="text-2xl font-semibold m-auto">PBJ.</a>
                </div>
                
                <form action="" class="m-auto w-7/12 shrink flex">
                    <input type="text" placeholder="Search part" autocomplete="off" class="w-full pl-5 py-3 rounded-lg shadow-sm outline-none bg-zinc-300 dark:bg-zinc-700 placeholder:text-zinc-500 border-transparent focus:border-transparent focus:ring-0 focus:text-white focus:bg-zinc-600 focus:placeholder:text-white dark:focus:placeholder:text-zinc-900 dark:focus:bg-zinc-200 dark:focus:text-zinc-900 focus:rounded-full">
                    <button class="-ml-8">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                        </svg>
                    </button>
                </form>

                <div class="m-auto w-4/12 flex xl:space-x-2.5 text-sm font-semibold justify-end">
                    <a href="{% url 'inventory:index' %}" class="xl:py-3 xl:px-2.5 rounded-lg hover:bg-zinc-900 hover:text-zinc-100 dark:hover:bg-zinc-100 dark:hover:text-zinc-900">Inventory</a>
                    <a href="" class="xl:py-3 xl:px-2.5 rounded-lg hover:bg-zinc-900 hover:text-zinc-100 dark:hover:bg-zinc-100 dark:hover:text-zinc-900">Checkout</a>
                    <a href="{% url 'core:signout' %}" class="xl:py-3 xl:px-2.5 rounded-lg hover:bg-zinc-900 hover:text-zinc-100 dark:hover:bg-zinc-100 dark:hover:text-zinc-900">Sign Out</a>
                    <button id="theme-toggle" class="xl:py-3 xl:px-2.5 bg-zinc-900 text-zinc-100 dark:bg-zinc-100 dark:text-zinc-900 rounded-lg hover:bg-zinc-800 dark:hover:bg-zinc-300">
                        <span id="light-mode" class="hidden">Light Mode</span>
                        <span id="dark-mode" class="hidden">Dark Mode</span>
                    </button>
                </div>

            </div>

        </header>

            {% block body %} {% endblock %}
    </div>
                
        {% else %}

    <!--Home if not logged in-->
    <div class="min-h-screen bg-zinc-100 text-zinc-900 dark:bg-zinc-900 dark:text-zinc-100 overflow-hidden">

        <header class="h-20 absolute top-0 left-0 right-0 w-10/12 mx-auto z-10">
            <div class="w-full h-full flex flex-row justify-between mx-auto">
                <div class="my-auto justify-start">
                    <a href="{% url 'core:index' %}" class="text-2xl xxl:text-3xl font-semibold">PBJ.</a>
                </div>
                <div class="my-auto flex sm:space-x-6 justify-end">
                    <a href="{% url 'core:login' %}" class="py-3 px-4 rounded-lg hover:bg-zinc-900 hover:text-white dark:hover:bg-zinc-100 dark:hover:text-zinc-900 transition ease-in-out">Sign In</a>
                    <a href="{% url 'core:signup' %}" class="py-3 px-4 rounded-lg hover:bg-zinc-900 hover:text-white dark:hover:bg-zinc-100 dark:hover:text-zinc-900 transition ease-in-out">Sign Up</a>
                </div>
            </div>
        </header>
        {% block nobody %}{% endblock %}

    </div>
    {% endif %}

    <script>

        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark')
        }
        
        var themeToggleDarkIcon = document.getElementById('dark-mode');
        var themeToggleLightIcon = document.getElementById('light-mode');

        // Change the icons inside the button based on previous settings
        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            themeToggleLightIcon.classList.remove('hidden');
        } else {
            themeToggleDarkIcon.classList.remove('hidden');
        }


        var themeToggleBtn = document.getElementById('theme-toggle');

        themeToggleBtn.addEventListener('click', function() {

            // toggle icons inside button
            themeToggleDarkIcon.classList.toggle('hidden');
            themeToggleLightIcon.classList.toggle('hidden');

            // if set via local storage previously
            if (localStorage.getItem('color-theme')) {
                if (localStorage.getItem('color-theme') === 'light') {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('color-theme', 'dark');
                } else {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('color-theme', 'light');
                }

            // if NOT set via local storage previously
            } else {
                if (document.documentElement.classList.contains('dark')) {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('color-theme', 'light');
                } else {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('color-theme', 'dark');
                }
            }
            
        });

    </script>
</body>
</html>